<div style="padding:2% 4% 0 4%">
    <div>
        <article nz-typography *ngIf='this.mgr.entity!=null'>
            <h1 nz-typography class="center-text">
                {{this.mgr.entity.name}}
            </h1>
            <h3 nz-typography class="center-text">
                {{this.mgr.currentInfo?.chapter?.name}} [{{this.mgr.position?.current}}/{{this.mgr.position?.total}}]
                <nz-spin nzSimple [nzIndicator]="indicatorTemplate" class="inline-icon"> </nz-spin>
            </h3>
        </article>
        <nz-progress [nzPercent]="this.mgr.chapterPos" [nzSuccessPercent]="this.mgr.comicPos"
            [nzStrokeColor]="{ '0%': '#ABCDEFEE', '100%': '#12345699' }" [nzShowInfo]='false'></nz-progress>
    </div>
    <div *ngIf='this.mgr.entity!=null' style="margin-top:20px;">
        <article nz-typography>
            <p nz-typography nzEllipsis nzExpandable [nzEllipsisRows]='3'>
                {{this.mgr.entity.descript}}
            </p>
        </article>
    </div>
    <div *ngIf='this.mgr.unComplatedTasks&&this.mgr.unComplatedTasks.length!=0'>
        <div>
            <h3 [ngStyle]="{ margin: '16px 0' }" nz-tooltip
                nzTooltipTitle="I'm sure I won't tell you it's single threaded">Task Quene
                ({{this.mgr.unComplatedTasks.length}})</h3>
            <nz-list nzSize="small" nzSplit="false">
                <nz-list-item *ngFor='let i of this.mgr.unComplatedTasks;' style="display: block;">
                    <div>
                        <div>
                            <nz-progress nzPercent="100" [nzStrokeColor]="{ '0%': '#654321', '100%': '#123456' }"
                                nzStatus="active" [nzShowInfo]='false'></nz-progress>
                        </div>
                        <div>
                            <a [href]="i.comicUrl" style="margin-right:10px;">{{i.name}}</a>
                            <nz-spin nzSimple [nzIndicator]="indicatorTemplate" style="display: inline-block;">
                            </nz-spin>
                            <button nz-button nzType="text" nzDanger (click)='this.showInfo(i)'>
                                <i nz-icon nzType="check" nzTheme="outline"></i>
                            </button>
                            <button nz-button nzType="text" nzDanger (click)='this.remove(i)'>
                                <i nz-icon nzType="close" nzTheme="outline"></i>
                            </button>
                        </div>
                    </div>
                </nz-list-item>
            </nz-list>
        </div>
    </div>
</div>
<nz-drawer *ngIf='this.drawerVisible' [(nzVisible)]='this.drawerVisible' [nzTitle]='this.drawerComic&&this.drawerComic.name' [nzClosable]="true"
    (nzOnClose)='this.drawerVisible=false'>
    <ng-container>
        <div *ngIf='this.drawerComic!=null'>
            <p nz-typography>
                <nz-tag nzColor="#EEE">
                    <a [href]="this.drawerComic.comicUrl" target="_blank">Origin link</a>
                </nz-tag>
                <nz-tag nzColor="#ABC">
                    <a [href]='this.drawerComic.imageUrl' target="_blank">Logo Image Link</a>
                </nz-tag>
            </p>
            <h4 nz-typography>Description</h4>
            <p nz-typography nzEllipsis nzExpandable [nzEllipsisRows]="3">
                {{this.drawerComic.descript}}
            </p>
            <h4 nz-typography>Chapters (<strong>{{this.drawerComic.chapters.length}}</strong>)</h4>
            <p nz-typography>
                <nz-list nzSize="small" nzSplit="false">
                    <nz-list-item *ngFor='let i of this.drawerComic.chapters;'>
                        <div>
                            <a [href]='i.targetUrl' target="_blank">{{i.title}}</a>
                        </div>
                    </nz-list-item>
                </nz-list>
            </p>
        </div>
    </ng-container>
</nz-drawer>

<ng-template #indicatorTemplate><i nz-icon nzType="loading"></i></ng-template>