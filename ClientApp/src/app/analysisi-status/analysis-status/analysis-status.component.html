<div style="padding:2% 4% 0 4%">
    <div *ngIf='this.mgr.bookshelfs'>
        <div>
            <div>
                <h3 [ngStyle]="{ margin: '16px 0',display:'inline','margin-right':'15px' }" nz-tooltip
                    nzTooltipTitle="I'm sure I won't tell you it's single threaded">Bookshelf
                ({{this.mgr.bookshelfs.length}})</h3>
                <button nz-button nzDanger  nz-tooltip
                nzTooltipTitle="Clear all bookshelf!"
                nz-popconfirm
                nzPopconfirmTitle="Are you sure clear all bookshelf?"
                nzPopconfirmPlacement="bottom"
                (nzOnConfirm)="this.clear()"
                >Clear</button>
            </div>
            <nz-list nzSize="small" nzSplit="false">
                <nz-list-item *ngFor='let i of this.mgr.bookshelfs;' style="display: block;">
                    <div>
                        <div>
                            <nz-progress [nzPercent]="(((i.bookshelf.readChapter)/(i.bookshelf.entity.chapters.length-1))*100).toFixed(2)"
                                [nzStrokeColor]="{ '0%': '#654321', '100%': '#123456' }" nzStatus="active"
                                [nzShowInfo]='false'></nz-progress>
                        </div>
                        <div>
                            <a [routerLink]="['/w']" [queryParams]="{ref:i.bookshelf.entity.comicUrl}" style="margin-right:10px;">{{i.bookshelf.entity.name}}</a>
                            <nz-spin *ngIf='i.bookshelf.readChapter+1!=i.bookshelf.entity.chapters.length' nzSimple
                                [nzIndicator]="indicatorTemplate" style="display: inline-block;">
                            </nz-spin>
                            <button nz-button nzType="text" nzDanger (click)='relay.showInfo(i.bookshelf)'>
                                <i nz-icon nzType="check" nzTheme="outline"></i>
                            </button>
                            <button nz-button nzType="text" nzDanger 
                            nz-popconfirm
                            nzPopconfirmTitle="Are you sure remove this bookshelf?"
                            nzPopconfirmPlacement="bottom"
                            (nzOnConfirm)="relay.remove(i.bookshelf)">
                                <i nz-icon nzType="close" nzTheme="outline"></i>
                            </button>
                        </div>
                    </div>
                </nz-list-item>
            </nz-list>
        </div>
    </div>
</div>
<app-relay-comic #relay [(drawerIsInBookshelf)]='drawerIsInBookshelf'>

</app-relay-comic>

<ng-template #indicatorTemplate><i nz-icon nzType="loading"></i></ng-template>